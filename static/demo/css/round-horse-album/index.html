<!DOCTYPE html>
<html>
  <head>
    <title>旋转木马相册</title>
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">    
	<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
	<meta http-equiv="description" content="This is my page">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="format-detection" content="telephone=no">
	<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
	<link rel="stylesheet" type="text/css" href="css/basic.css">
	<link rel="stylesheet" type="text/css" href="css/animation.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<link rel="stylesheet" type="text/css" href="css/delay.css">
  </head>
<body>
	<div id="container">
		<div class="tdloading">
			<div class="cont ai delay1">
				<div class="item i1">L</div>
				<div class="item i2">L</div>
				<div class="item i3">L</div>
				<div class="item i4">L</div>
				<div class="item i5">L</div>
				<div class="item i6">L</div>
			</div>
			<div class="cont ai delay2">
				<div class="item i1">O</div>
				<div class="item i2">O</div>
				<div class="item i3">O</div>
				<div class="item i4">O</div>
				<div class="item i5">O</div>
				<div class="item i6">O</div>
			</div>
			<div class="cont ai delay3">
				<div class="item i1">A</div>
				<div class="item i2">A</div>
				<div class="item i3">A</div>
				<div class="item i4">A</div>
				<div class="item i5">A</div>
				<div class="item i6">A</div>
			</div>
			<div class="cont ai delay4">
				<div class="item i1">D</div>
				<div class="item i2">D</div>
				<div class="item i3">D</div>
				<div class="item i4">D</div>
				<div class="item i5">D</div>
				<div class="item i6">D</div>
			</div>
			<div class="cont ai delay5">
				<div class="item i1">I</div>
				<div class="item i2">I</div>
				<div class="item i3">I</div>
				<div class="item i4">I</div>
				<div class="item i5">I</div>
				<div class="item i6">I</div>
			</div>
			<div class="cont ai delay6">
				<div class="item i1">N</div>
				<div class="item i2">N</div>
				<div class="item i3">N</div>
				<div class="item i4">N</div>
				<div class="item i5">N</div>
				<div class="item i6">N</div>
			</div>
			<div class="cont ai delay7">
				<div class="item i1">G</div>
				<div class="item i2">G</div>
				<div class="item i3">G</div>
				<div class="item i4">G</div>
				<div class="item i5">G</div>
				<div class="item i6">G</div>
			</div>
		</div>
		<div class="round_trojan">
			<div class="round_trojan_con" style="transform: rotateX(0deg);">
				<div class="items_con inital_trojan">
					<div class="round_trojan_item">
						<img src="img/bg_trojan1.jpg" class="bgImg"/>
					</div>
					<div class="round_trojan_item">
						<img src="img/bg_trojan2.jpg" class="bgImg"/>
					</div>
					<div class="round_trojan_item">
						<img src="img/bg_trojan3.jpg" class="bgImg"/>
					</div>
					<div class="round_trojan_item">
						<img src="img/bg_trojan4.jpg" class="bgImg"/>
					</div>
					<div class="round_trojan_item">
						<img src="img/bg_trojan5.jpg" class="bgImg"/>
					</div>
					<div class="round_trojan_item">
						<img src="img/bg_trojan6.jpg" class="bgImg"/>
					</div>
					<div class="round_trojan_item">
						<img src="img/bg_trojan7.jpg" class="bgImg"/>
					</div>
					<div class="round_trojan_item">
						<img src="img/bg_trojan8.jpg" class="bgImg"/>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
	<script src="js/basic.js"></script>
</body>
<script>
var loadAudioArr = [""];
var loadImgArr = ["img/bg_trojan1.jpg",
                  "img/bg_trojan2.jpg",
                  "img/bg_trojan3.jpg",
                  "img/bg_trojan4.jpg",
                  "img/bg_trojan5.jpg",
                  "img/bg_trojan6.jpg",
                  "img/bg_trojan7.jpg",
                  "img/bg_trojan8.jpg"];
var preLoad = new PreLoading();
document.onreadystatechange = function(){
	if(!preLoad.isPreLoad){
		preLoad.isPreLoad = true;
		preLoad.preLoadAudio(loadAudioArr);  
		preLoad.preLoadImg(loadImgArr); 
	}
	if(document.readyState == "complete"){ 
		if(preLoad.loadAudioCom && preLoad.loadImgCom){
			$(".tdloading").fadeOut();
		}
	}
};
function rotateTrojan(){
	var mpos = {},
		dmpos = {},
		elmOffset = {},
		mouseEvent = ("ontouchstart" in window) ? 
			{down: 'touchstart',move: 'touchmove',up: 'touchend'} : 
			{down: 'mousedown',move: 'mousemove',up: 'mouseup'},
		mousedown = false,
		trojan_angle;
	document.querySelector(".round_trojan").addEventListener(mouseEvent.down,function(e){
		if(e.touches == undefined){
			mpos.tx = e.pageX;
			mpos.ty = e.pageY;
			trojan_angle = getAngleFromStyle(".round_trojan_con").angle;
			mousedown = true;
		}
	},false);
	document.querySelector(".round_trojan").addEventListener(mouseEvent.move,function(e){
		if(e.touches == undefined && mousedown){
			dmpos.dtx = e.pageX - mpos.tx;
			dmpos.dty = e.pageY - mpos.ty;
			d_trojan_angle = trojan_angle - dmpos.dty/10;
			$(".round_trojan_con").css("transform","rotateX(" + d_trojan_angle + "deg)");
		}
	},false);
	document.querySelector(".round_trojan").addEventListener(mouseEvent.up,function(e){
		mpos = {};
		elmOffset = {};
		mousedown = false;
	},false);
}
$(function(){
	rotateTrojan();
	$(".round_trojan_con").hover(function(){
		$(".round_trojan_item").eq(0).css("transform", "rotateX(0deg) rotateY(0deg) translateZ(-782.84px)");
		$(".round_trojan_item").eq(1).css("transform", "rotateX(0deg) rotateY(45deg) translateZ(-782.84px)");
		$(".round_trojan_item").eq(2).css("transform", "rotateX(0deg) rotateY(90deg) translateZ(-782.84px)");
		$(".round_trojan_item").eq(3).css("transform", "rotateX(0deg) rotateY(135deg) translateZ(-782.84px)");
		$(".round_trojan_item").eq(4).css("transform", "rotateX(0deg) rotateY(180deg) translateZ(-782.84px)");
		$(".round_trojan_item").eq(5).css("transform", "rotateX(0deg) rotateY(225deg) translateZ(-782.84px)");
		$(".round_trojan_item").eq(6).css("transform", "rotateX(0deg) rotateY(270deg) translateZ(-782.84px)");
		$(".round_trojan_item").eq(7).css("transform", "rotateX(0deg) rotateY(315deg) translateZ(-782.84px)");
	},function(){
		$(".round_trojan_item").eq(0).css("transform", "rotateX(0deg) rotateY(0deg) translateZ(-482.84px)");
		$(".round_trojan_item").eq(1).css("transform", "rotateX(0deg) rotateY(45deg) translateZ(-482.84px)");
		$(".round_trojan_item").eq(2).css("transform", "rotateX(0deg) rotateY(90deg) translateZ(-482.84px)");
		$(".round_trojan_item").eq(3).css("transform", "rotateX(0deg) rotateY(135deg) translateZ(-482.84px)");
		$(".round_trojan_item").eq(4).css("transform", "rotateX(0deg) rotateY(180deg) translateZ(-482.84px)");
		$(".round_trojan_item").eq(5).css("transform", "rotateX(0deg) rotateY(225deg) translateZ(-482.84px)");
		$(".round_trojan_item").eq(6).css("transform", "rotateX(0deg) rotateY(270deg) translateZ(-482.84px)");
		$(".round_trojan_item").eq(7).css("transform", "rotateX(0deg) rotateY(315deg) translateZ(-482.84px)");
	});
});
</script>
</html>
